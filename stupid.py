exec('from jina import Flow\nfrom jina.types.document.generators import from_csv\nwith open("data/community_20.csv") as file:\n    docs = list(from_csv(file, field_resolver={"title": "text"}))\nflow = (\n    Flow(port_expose=45678, protocol="http") \n    .add(\n        uses="jinahub+docker://TransformerTorchEncoder", \n        name="encoder",\n    )\n    .add(\n        uses="jinahub+docker://SimpleIndexer", \n        name="indexer",\n    )\n)\nwith flow:\n    flow.post(on="/index", inputs=docs) \n    flow.block()')
